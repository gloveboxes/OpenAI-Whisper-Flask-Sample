"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[902],{4137:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=a.createContext({}),s=function(e){var t=a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},h="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),h=s(r),u=n,d=h["".concat(p,".").concat(u)]||h[u]||m[u]||i;return r?a.createElement(d,o(o({ref:t},c),{},{components:r})):a.createElement(d,o({ref:t},c))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[h]="string"==typeof e?e:n,o[1]=l;for(var s=2;s<i;s++)o[s]=r[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}u.displayName="MDXCreateElement"},7779:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=r(7462),n=(r(7294),r(4137));const i={},o="Home Assistant",l={unversionedId:"Assistant",id:"Assistant",title:"Home Assistant",description:"Requirements",source:"@site/docs/20-Assistant.md",sourceDirName:".",slug:"/Assistant",permalink:"/OpenAI-Whisper-Transcriber-Sample/Assistant",draft:!1,editUrl:"https://github.com/gloveboxes/OpenAI-Whisper-Transcriber-Sample/tree/master/docs/docs/20-Assistant.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"OpenAI Functions",permalink:"/OpenAI-Whisper-Transcriber-Sample/OpenAI-Functions"},next:{title:"Whisper server setup",permalink:"/OpenAI-Whisper-Transcriber-Sample/Whisper-Server/Whisper-Server-Setup"}},p={},s=[{value:"Requirements",id:"requirements",level:2},{value:"Cloud Services",id:"cloud-services",level:2},{value:"OpenAI API",id:"openai-api",level:3},{value:"Weather API",id:"weather-api",level:3},{value:"Clone the repository",id:"clone-the-repository",level:2},{value:"Install prerequisites",id:"install-prerequisites",level:2},{value:"Set the Text to Speech Transcriber mode",id:"set-the-text-to-speech-transcriber-mode",level:3},{value:"Installing prerequisites",id:"installing-prerequisites",level:3},{value:"Run",id:"run",level:2}],c={toc:s},h="wrapper";function m(e){let{components:t,...r}=e;return(0,n.kt)(h,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"home-assistant"},"Home Assistant"),(0,n.kt)("h2",{id:"requirements"},"Requirements"),(0,n.kt)("h2",{id:"cloud-services"},"Cloud Services"),(0,n.kt)("p",null,"The Home Assistant uses the following cloud services:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://platform.openai.com"},"OpenAI")," chat and depending on your configuration, the ",(0,n.kt)("inlineCode",{parentName:"li"},"Whisper")," speech to text transcriber."),(0,n.kt)("li",{parentName:"ol"},"The ",(0,n.kt)("a",{parentName:"li",href:"https://www.weatherapi.com/"},"Weather API")," to get weather data.")),(0,n.kt)("h3",{id:"openai-api"},"OpenAI API"),(0,n.kt)("p",null,"This project uses the ",(0,n.kt)("a",{parentName:"p",href:"https://platform.openai.com/docs/api-reference/chat"},"OpenAI Chat Completion API")," to extract OpenAI Functions and generate text."),(0,n.kt)("p",null,"Create an OpenAI account and get an API key."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Sign up for an OpenAI account at ",(0,n.kt)("a",{parentName:"li",href:"https://platform.openai.com"},"https://platform.openai.com"),"."),(0,n.kt)("li",{parentName:"ol"},"Create an API key at ",(0,n.kt)("a",{parentName:"li",href:"https://platform.openai.com/account/api-keys"},"https://platform.openai.com/account/api-keys"),".")),(0,n.kt)("p",null,"Save the API key in the ",(0,n.kt)("inlineCode",{parentName:"p"},"OPENAI_API_KEY")," environment variable."),(0,n.kt)("h3",{id:"weather-api"},"Weather API"),(0,n.kt)("p",null,"This project uses the ",(0,n.kt)("a",{parentName:"p",href:"https://www.weatherapi.com/"},"Weather API")," to get weather data. This data is used to ",(0,n.kt)("inlineCode",{parentName:"p"},"ground")," the GPT prompts the assistant generates."),(0,n.kt)("p",null,"Create a Weather API account and get an API key."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Sign up for a ",(0,n.kt)("a",{parentName:"li",href:"https://www.weatherapi.com/signup.aspx"},"Weather API account"),"."),(0,n.kt)("li",{parentName:"ol"},"Create a free ",(0,n.kt)("a",{parentName:"li",href:"https://www.weatherapi.com/my/"},"Weather API key"),"."),(0,n.kt)("li",{parentName:"ol"},"Save the API key in the ",(0,n.kt)("inlineCode",{parentName:"li"},"WEATHER_API_KEY")," environment variable.")),(0,n.kt)("h2",{id:"clone-the-repository"},"Clone the repository"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/gloveboxes/OpenAI-Whisper-Transcriber-Sample\n")),(0,n.kt)("h2",{id:"install-prerequisites"},"Install prerequisites"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install Python version 3.8 ~ 3.10. The ",(0,n.kt)("a",{parentName:"p",href:"https://pypi.org/project/openai-whisper/"},"Whisper library")," is supported on Python 3.8 to 3.10.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install the required Python packages:")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create a Python virtual environment:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"python -m venv .assistant\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Activate the Python virtual environment:"),(0,n.kt)("p",{parentName:"li"},"Windows"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-pwsh"},"./.assistant/Scripts/activate\n")),(0,n.kt)("p",{parentName:"li"},"Linux and macOS"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"source .assistant/bin/activate\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install the required Python packages:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"pip install -r requirements.txt\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"On Windows, by default, the ",(0,n.kt)("inlineCode",{parentName:"p"},"requirements.txt")," file will install the CPU version of PyTorch. If you have an NVidia GPU, you can install the CUDA accelerated version of PyTorch."),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"First uninstall the CPU version of PyTorch:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-pwsh"},"pip3 uninstall torch torchvision torchaudio\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install the CUDA accelerated version of PyTorch:"),(0,n.kt)("p",{parentName:"li"},"Review the ",(0,n.kt)("a",{parentName:"p",href:"https://pytorch.org/get-started/locally/"},"PyTorch website")," for the latest installation instructions."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu117\n")))))),(0,n.kt)("h3",{id:"set-the-text-to-speech-transcriber-mode"},"Set the Text to Speech Transcriber mode"),(0,n.kt)("p",null,"There are three modes to use Whisper speech to text transcriber:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("inlineCode",{parentName:"li"},"local"),": The Whisper speech to text transcription is done locally on the device. This is the default mode and free mode. The speed will depend on the hardware capabilities of your computer. The first time the Whisper speech to text transcriber is used, it will download the transcriber model from the internet. This will take a few minutes."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("inlineCode",{parentName:"li"},"openai"),": The Whisper speech to text transcription is done using the OpenAI API. This is a paid service, review ",(0,n.kt)("a",{parentName:"li",href:"https://openai.com/pricing/"},"OpenAI Audio Model Pricing")," for more information."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("inlineCode",{parentName:"li"},"gpu"),": You can run your own Whisper services on your own NVidia GPU. Depending on your GPU configuration, this can be a lot faster than the ",(0,n.kt)("inlineCode",{parentName:"li"},"local")," mode.")),(0,n.kt)("h3",{id:"installing-prerequisites"},"Installing prerequisites"),(0,n.kt)("h2",{id:"run"},"Run"))}m.isMDXComponent=!0}}]);